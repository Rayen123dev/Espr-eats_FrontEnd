<canvas #canvas class="particles-canvas"></canvas>

<!-- Added restaurant-themed background elements -->
<div class="food-particles" id="food-particles"></div>

<div class="background-overlay">
  <div class="login-card">
    <div class="login-left">
      <div class="login-content">
        <div class="logo-container">
          <div class="university-logo">
            <img src="assets/Espreats.png" width="80px" height="80px" alt="University Logo">
          </div>
        </div>
        <h1 class="welcome-text">University Restaurant</h1>
        <p class="slogan">Delicious meals, inspiring spaces</p>
        
        <div class="food-animation">
          <!-- SVG food icons that will be animated with JS -->
          <svg class="food-icon" viewBox="0 0 24 24">
            <path d="M18.06 23H19.72C20.56 23 21.25 22.35 21.35 21.53L23 5.05H18V1H16.03V5.05H11.06L11.36 7.39C13.07 7.86 14.67 8.71 15.94 9.88C17.45 11.29 18.5 13.14 18.88 15.23L18.06 23M1 22V21H16.03V22C16.03 22.54 15.58 23 15 23H2C1.45 23 1 22.54 1 22M16.03 15C16.03 7 1 7 1 15H16.03Z" />
          </svg>
          <svg class="food-icon" viewBox="0 0 24 24">
            <path d="M15.5,21L14,8H16.23L15.1,3.46L16.84,3L18.09,8H22L20.5,21H15.5M5,11H10A3,3 0 0,1 13,14H2A3,3 0 0,1 5,11M13,18V21H2V18H13M3,15H12V17H3V15Z" />
          </svg>
          <svg class="food-icon" viewBox="0 0 24 24">
            <path d="M12,3C8,3 4,5 4,9C4,11.5 5.25,13.2 7,14.6V22H9V16H11V22H13V16H15V22H17V14.6C18.8,13.2 20,11.5 20,9C20,5 16,3 12,3M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5Z" />
          </svg>
          <!-- Added more food icons for enhanced animation -->
          <svg class="food-icon" viewBox="0 0 24 24">
            <path d="M8.1,13.34L3.91,9.16C2.35,7.59 2.35,5.06 3.91,3.5L10.93,10.5L8.1,13.34M14.88,11.53L13.41,13L20.29,19.88L18.88,21.29L12,14.41L5.12,21.29L3.71,19.88L13.47,10.12C12.76,8.59 13.26,6.44 14.85,4.85C16.76,2.93 19.5,2.57 20.96,4.03C22.43,5.5 22.07,8.24 20.15,10.15C18.56,11.74 16.41,12.24 14.88,11.53Z" />
          </svg>
          <svg class="food-icon" viewBox="0 0 24 24">
            <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,10.5A1.5,1.5 0 0,0 10.5,12A1.5,1.5 0 0,0 12,13.5A1.5,1.5 0 0,0 13.5,12A1.5,1.5 0 0,0 12,10.5M7.5,10.5A1.5,1.5 0 0,0 6,12A1.5,1.5 0 0,0 7.5,13.5A1.5,1.5 0 0,0 9,12A1.5,1.5 0 0,0 7.5,10.5M16.5,10.5A1.5,1.5 0 0,0 15,12A1.5,1.5 0 0,0 16.5,13.5A1.5,1.5 0 0,0 18,12A1.5,1.5 0 0,0 16.5,10.5Z" />
          </svg>
        </div>
      </div>
    </div>
    <div class="login-right">
      <div class="login-form-container">
        <h2>Log In</h2>
        <p class="form-subtitle">Welcome back! Please enter your details</p>
        
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          <div class="form-group" [ngClass]="{'has-error': isSubmitted && formControls['email'].errors}">
            <label for="email">Email</label>
            <div class="input-container">
              <input 
                type="email" 
                id="email" 
                formControlName="email" 
                placeholder="Enter your email"
                [ngClass]="{'invalid-input': isSubmitted && formControls['email'].errors}"
              >
            </div>
            <div class="error-message" *ngIf="isSubmitted && formControls['email'].errors">
              <span *ngIf="formControls['email'].errors['required']">Email is required</span>
              <span *ngIf="formControls['email'].errors['email']">Please enter a valid email</span>
            </div>
          </div>
          
          <div class="form-group" [ngClass]="{'has-error': isSubmitted && formControls['password'].errors}">
            <label for="password">Password</label>
            <div class="input-container">
              <input 
                [type]="showPassword ? 'text' : 'password'" 
                id="password" 
                formControlName="password" 
                placeholder="Enter your password"
                [ngClass]="{'invalid-input': isSubmitted && formControls['password'].errors}"
              >
              <i 
                [class]="showPassword ? 'fas fa-eye-slash password-toggle' : 'fas fa-eye password-toggle'"
                (click)="togglePasswordVisibility()"
              ></i>
            </div>
            <div class="error-message" *ngIf="isSubmitted && formControls['password'].errors">
              <span *ngIf="formControls['password'].errors['required']">Password is required</span>
              <span *ngIf="formControls['password'].errors['minlength']">Password must be at least 3 characters</span>
            </div>
          </div>
          <re-captcha 
            (resolved)="onCaptchaResolved($event)" 
            siteKey="6LdkUworAAAAAAENrGEQZApGcV8TH6MrYRICgz1q">
          </re-captcha>
          
          <div class="form-options">
            <div class="remember-me">
              <input type="checkbox" id="remember" formControlName="rememberMe">
              <label for="remember">Remember me</label>
            </div>
            <a href="javascript:void(0)" class="forgot-password" routerLink="/forgot-password">Forgot password?</a>
          </div>
          
          <button 
            type="submit" 
            class="login-button" 
            [disabled]="loading"
          >
            <span *ngIf="!loading">Log In</span>
            <div *ngIf="loading" class="spinner"></div>
          </button>
        </form>
        
        <div class="login-divider">
          <span>Don't have an account?</span>
        </div>
        
        <div class="signup-link">
          <button class="google-button" routerLink="/signup">
            Sign Up 
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Improved error alert container -->
<div class="alert-container" *ngIf="errorMessage">
  <div class="alert alert-danger" [@fadeInOut]>
    <div class="alert-content">
      <i class="fas fa-exclamation-circle"></i>
      <span>{{ errorMessage }}</span>
    </div>
    <button class="close-btn" (click)="clearError()">Ã—</button>
  </div>
</div>