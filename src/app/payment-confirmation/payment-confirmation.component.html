<!-- Toast Notification -->
<!-- Toast Notification -->
<div class="toast" *ngIf="showToast" [ngClass]="toastType">
  <div class="toast-icon">
    <svg
      *ngIf="toastType === 'success'"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="white"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <polyline points="20 6 9 17 4 12"></polyline>
    </svg>

    <svg
      *ngIf="toastType === 'error'"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="white"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="15" y1="9" x2="9" y2="15"></line>
      <line x1="9" y1="9" x2="15" y2="15"></line>
    </svg>
  </div>
  <div class="toast-content">
    <p class="toast-title">{{ toastType === 'success' ? 'Successful' : 'Error' }}</p>
    <p class="toast-message">{{ toastMessage }}</p>
  </div>
</div>




<!-- Confirmation Container -->
<div class="confirmation-container" *ngIf="subscriptionDetails; else loading">
  <!-- Left Panel -->
  <div class="left-panel">
    <div class="header">
      <h2>Subscribe to {{ subscriptionDetails.typeAbonnement | titlecase }}</h2>
      <h1>{{ subscriptionDetails.cout.toFixed(2) }} Dt</h1>
    </div>
    <div class="details">
      <div class="detail-row">
        <span>Start Date</span>
        <span>{{ subscriptionDetails.dateDebut }}</span>
      </div>
      <div class="detail-row">
        <span>Remaining Days</span>
        <span>{{ subscriptionDetails.remainingDays }}</span>
      </div>
      <div class="detail-row">
        <span>Confirmed</span>
        <span>{{ subscriptionDetails.isConfirmed ? 'Yes' : 'No' }}</span>
      </div>
    </div>
    <div class="footer">
      Powered by Stripe | 
      <a href="#">Terms</a> | 
      <a href="#">Privacy</a>
    </div>
  </div>

  <!-- Right Panel -->
  <div class="right-panel">
    <h6>VOTRE PLAN</h6>
    <hr/>
    <div style="display: flex; justify-content: space-between;">
      <div style="display: flex; flex-direction: column;">
    <b>{{ subscriptionDetails.typeAbonnement | titlecase }}</b>
    votre plan va etre expiré le {{ subscriptionDetails.dateFin }}<br/>
    <p class="voir-plus" style="padding: 10px 0px; cursor: pointer;">Voir détails<i style="font-size: 13px; padding: 0px 2px;" class="fas fa-chevron-down"></i></p>
    </div>
    <div style="display: flex; flex-direction: column; width: 22%;">
    <button class="btn-upgrade">Modifier Plan</button>
    <button
      class="btn-annuler"
      (click)="deleteSubscription()"
      [disabled]="isDeleting || submitting"
    >
      {{ isDeleting ? 'Annuler...' : 'Annuler Plan' }}
    </button>
    </div>
    
    </div>

    <br/>
    <br/>
    <br/>
    <br/>
    <hr/> 
    <h3>Entrer Code de Verification</h3>
    <p>S'il Vous plait entrez le code de verification que vous avez reçu pour confirmer votre payment.</p>
    <form (ngSubmit)="submitCode()">
      <label for="code">Code de Verification</label>
      <input
        type="text"
        id="code"
        name="code"
        placeholder="Entrez votre code"
        [(ngModel)]="generatedCode"
        required
      />
      <button type="submit" class="pay-button" [disabled]="submitting">
        {{ submitting ? 'Submitting...' : 'Soumettre Code' }}
      </button>
    </form>
    

    <!-- Footer -->
    

  </div>

</div>

<!-- Loading Template -->
<ng-template #loading>
  Loading subscription details...
</ng-template>

