<div class="billing-container">
  <h1 class="page-title">Gestion de Votre Abonnement</h1>

  <!-- Current Plan Section -->
  <div class="section" *ngIf="subscriptionDetails">
    <h2>PLAN COURANT</h2>
    <div class="plan-details">
      <div class="plan-info">
        <span class="plan-name">{{ displayPlanName | titlecase }}</span>
        <span class="plan-cost">CoÃ»t {{ displayCost }}</span>
        <span class="plan-renewal">Votre abonnement expire le {{ displayRenewalDate | date:'mediumDate' }}.</span>
      </div>
      <div class="plan-actions">
        <button class="change-plan-btn" (click)="changePlan()">Supprimer Plan</button>
      </div>
    </div>
  </div>

  <!-- Error Message Section -->
  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
  </div>

  <!-- Loading Spinner Section -->
  <div *ngIf="isLoading" class="loading-spinner">
    <p>Chargement des dÃ©tails de l'abonnement...</p>
  </div>

  <!-- Payment Method Section -->
  <div class="section">
    <h2>MÃ©thode de Paiement</h2>
    <div class="payment-method">
      <span class="card-info">{{ paymentMethod.card }}</span>
      <span class="default-label" *ngIf="paymentMethod.isDefault">DÃ©faut</span>
      <span class="expiry">Expire {{ paymentMethod.expiry }}</span>
    </div>
  </div>

  <!-- Billing History Section -->
  <div class="section" *ngIf="transactions.length">
    <h2>Votre Historique de Transactions</h2>
    <div class="billing-history">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>DÃ©tails de Transaction</th>
            <th>Date Action</th>
            <th>Statut Abonnement</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let transaction of transactions">
            <td>{{ transaction.dateTransaction | date:'mediumDate' }}</td>
            <td>{{ transaction.details }}</td>
            <td>{{ transaction.dateTransaction }}</td>
            <td>{{ transaction.status | titlecase }}</td>
            <td><span class="download-icon">ðŸ“„</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- No Transactions Section -->
  <div *ngIf="transactions.length === 0 && !isLoadingTransactions">
    <p>Aucune transaction trouvÃ©e.</p>
  </div>

  <!-- Loading Transactions Spinner Section -->
  <div *ngIf="isLoadingTransactions" class="loading-spinner">
    <p>Chargement de l'historique des transactions...</p>
  </div>
</div>